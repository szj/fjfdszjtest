<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
@model QzgfFrame.Supplies.CollarSuppliesManger.Models.CollarSupplies
@{
    
    ViewBag.Title = "Register";
}       
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title> 
    <link href="../../../../Content/Lib/css/EditStyle.css" rel="stylesheet" type="text/css" />
    <link href="../../../../Lib/ligerUI/skins/Silvery/css/ligerui-all.css" rel="stylesheet" type="text/css" />
    <link href="../../../../Lib/ligerUI/skins/ligerui-icons.css" rel="stylesheet" type="text/css" />
    <link href="../../../../Content/Lib/css/autoSearchText.css" rel="stylesheet" type="text/css" />
    <script src="../../../../Lib/jquery/jquery-1.5.2.min.js" type="text/javascript"></script>
    <script src="../../../../Lib/jquery/jquery.form.js" type="text/javascript"></script>
    <script src="../../../../Lib/ligerUI/js/ligerui.all.js" type="text/javascript"></script>  
     <script src="../../../../Lib/jquery-validation/jquery.validate.js" type="text/javascript"></script>
    <script src="../../../../Lib/jquery-validation/jquery.metadata.js" type="text/javascript"></script>
    <script src="../../../../Lib/jquery-validation/messages_cn.js" type="text/javascript"></script>
    <script src="../../../../Lib/jquery-validation/addmethod.js" type="text/javascript"></script>
    <script src="../../../../Lib/MyDatePicker/WdatePicker.js" type="text/javascript"></script>
    <script src="../../../../Content/Lib/js/common.js" type="text/javascript"></script>
    <script src="../../../../lib/json2.js" type="text/javascript"></script>
    <script src="../../../../Content/lib/js/Supplies/CollarLine.js" type="text/javascript"></script>
    <script src="../../../../Content/lib/js/Supplies/Collar.js" type="text/javascript"></script> 
</head>
<body style=" padding:1px;">
<div id="autoSearch"><ul class="menu_v"></ul></div>

@using (Html.BeginForm("Collar", "CollarSupplies", FormMethod.Post, new { name = "newForm", id = "newForm" }))
{
    @Html.HiddenFor(m => m.Id)
    @Html.ValidationSummary(true, "Account creation was unsuccessful. Please correct the errors and try again.")
    <div>
    <table width="100%"><tr class="Header"><td style="width:45%"></td>
<td>
    @if (Model.suppliesCollarSupplies.IsArrival != "1")
    {
        <input type="submit" value="提 交" id="Button11" class="l-button l-button-submit" /> 
    }

<input type="button" value="返 回" class="l-button l-button-test" onclick="javascript:f_windowclose();"/></td></tr></table>                  
 
        <table cellpadding="0" border="0" cellspacing="0" class="edittable">
            <tbody>
               
                 <tr>
                    <td class="Right_White_font">所属县市：<span class="l-verify-star">*</span></td>
                     
                    <td class="Left_font" >
<input type="hidden" id="frameid" name="frameid" value="@ViewData["frameid"]" />
                    @Html.TextBoxFor(m => m.suppliesCollarSupplies.DistrictName, new { @class = "disable-dd-text", @readonly = "readonly", style = "width:138px;", validate = "{required:false}" })
                  
                    @Html.HiddenFor(m => m.Id)
                    @Html.HiddenFor(m => m.suppliesCollarSupplies.Id) 
                    @Html.HiddenFor(m => m.suppliesCollarSupplies.DistrictId)   
                     </td> 
                    <td class="Right_White_font">所属公司：<span class="l-verify-star">*</span></td>
                     
                    <td class="Left_font" >
                     @Html.TextBoxFor(m => m.suppliesCollarSupplies.CompanyName, new { @class = "disable-dd-text", @readonly = "readonly", style = "width:138px;", validate = "{required:false}" })
                     @Html.HiddenFor(m => m.suppliesCollarSupplies.CompanyId)  
                   </td> 
                    
                </tr> 
                <tr>
                    
                    <td class="Right_White_font">采购时间：<span class="l-verify-star">*</span></td>
                     
                    <td class="Left_font" >
                   @Html.TextBoxFor(m => m.suppliesCollarSupplies.CollarDate, new { @class = "disable-dd-text", @readonly = "readonly", style = "width:138px;", validate = "{required:false}" })
                     </td> 
                    
                    <td class="Right_White_font">采购操作员：<span class="l-verify-star">*</span></td>
                     
                    <td class="Left_font" >
                    @Html.TextBoxFor(m => m.suppliesCollarSupplies.CollarUser, new { maxlength = "20", @class = "disable-dd-text", style = "width:138px;", validate = "{required:true,minlength:1,maxlength:20}" })
                    </td> 
                </tr> 
                     
                <tr>
                    
                    <td class="Right_White_font">耗材类型：<span class="l-verify-star">*</span></td>
                     
                    <td class="Left_font" >
                     @Html.TextBoxFor(m => m.suppliesCollarSupplies.SuppliesTypeName, new { @class = "disable-dd-text", @readonly = "readonly", style = "width:138px;", validate = "{required:false}" })
                    @Html.HiddenFor(m => m.suppliesCollarSupplies.SuppliesTypeId)
                    </td> 
                    
                    <td class="Right_White_font">耗材单位：<span class="l-verify-star">*</span></td>
                     
                    <td class="Left_font" >
                    @Html.TextBoxFor(m => m.suppliesCollarSupplies.UnitName, new { @class = "disable-dd-text", @readonly = "readonly", style = "width:138px;", validate = "{required:false}" })
                  
                    </td> 
                </tr>                  
                  
                   <tr>
                    <td class="Right_White_font">总量：<span class="l-verify-star">&nbsp;</span></td>
                     
                    <td class="Left_font" colspan="4">
                    @Html.TextBoxFor(m => m.suppliesCollarSupplies.Num, new { @class = "disable-dd-text", @readonly = "readonly", style = "width:138px;", validate = "{required:true,number: true}" })
                     </td> 
</tr>
                 <tr>
                    <td class="Right_White_font">备注：<span class="l-verify-star">&nbsp;</span></td>
                     
                    <td class="Left_font" colspan="4">
                    @Html.TextAreaFor(m => m.suppliesCollarSupplies.Remark, new { Multiline = true, @class = "l-textarea", size = "70", style = "width:100%", validate = "{required:false,minlength:0,maxlength:100}" })
                    </td> 
</tr>
  <tr>
                    <td colspan="4" width="100%" align="center" class="Left_Bottom">
                    <table width="100%" >
                    <tr width="100%" ><td width="100%" >
                    <table width="100%" border="0" cellpadding="2" cellspacing="1"  class="com_tab">
<tr class="hno">
              <td class="bdno"><input type="button" name="Submit" style="width:50px;" value="领料" class="sel_btn" onclick="AddSuppliesRow()" /></td>
                <td  class="btno">  领料时间</td>
                <td  >领料数量</td>
              <td ></td>
  </tr>
@if (Model.CollarList != null)
{
    var j = 0;


    foreach (var n in Model.CollarList as IList<QzgfFrame.Supplies.CollarSuppliesManger.Models.SuppliesCollar>)
    {
        // ViewData["Component"] = new SelectList(Model.Components, "Id", "ComponentName",n.ComponentId);

        var CollarDate = "CollarDate" + j; var Num = "Num" + j; var seqno = j + 1;
        var OrderNo = "OrderNo" + j;
             <tr  class="bno">
                <td class="bdno"><div align='center' style='width:40px'></div></td>
                <td class="btno"> @string.Format("{0:d}", n.CollarDate)</td>
                <td  >@n.Num</td>
                 <td style="width:0"><input name='@OrderNo' type='hidden' id='@OrderNo' value='@seqno' /></td>
                </tr>                 
                                                                                          j++;
    }
}
        </table>
        <table id="SuppliesFrame" width="100%" border="0" cellpadding="2" cellspacing="1"  class="com_tab"> </table>
        <input name='TRLastIndex' type='hidden' id='TRLastIndex' value="0" />
                    @Html.HiddenFor(m => m.Collars)
                    </td></tr>
 <tr ><td  align="left" style=" background-color:#fff; margin-left:200px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;已领数量：
 <input type="text" class = "disable-dd-text" id="Count" name="suppliesCollarSupplies.ArrivalNum" value="@Model.suppliesCollarSupplies.ArrivalNum"  readonly='readonly' />
 <input type="hidden" id="ArrNum" value="@Model.suppliesCollarSupplies.ArrivalNum" />
 <span class="l-verify-star" id="displyMsg" ></span></td></tr>
               
                    </table> </td></tr> 

</tbody>
</table>  
<table width="100%"><tr class="Header"><td style="width:45%"></td>
<td>
@if (Model.suppliesCollarSupplies.IsArrival != "1")
{
   <input type="submit" value="提 交" id="Button1" class="l-button l-button-submit" /> 
}
<input type="button" value="返 回" class="l-button l-button-test" onclick="javascript:f_windowclose();"/></td></tr></table>                  
   
    </div> 
    }
    
</body>
</html>
