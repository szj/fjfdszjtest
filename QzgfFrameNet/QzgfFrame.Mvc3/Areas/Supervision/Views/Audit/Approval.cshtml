@model QzgfFrame.Supervision.OrdersManager.Models.Order
@{
    
    ViewBag.Title = "审批工单";
}       
    <script type="text/javascript">
        //var CurID =  <%=CurID %>;
        var Validator = null;
        $(function () {
            $.metadata.setType("attr", "validate");
            $("#form1").ligerForm();
            deafultValidate($("#form1"));
            Validator = $("#form1").validate();
        });

        function f_success() {
            $(document).ready(function () {
                $.ligerDialog.confirm("是否继续编辑", "保存成功", function (ok) {
                    $.ligerDialog.closeWaitting();
                    parent.window.frames["mainframe"].f_reload();
                    if (!ok) {
                        parent.window.frames["mainframe"].f_closeWindow();
                    }
                });
            });
        }
        function f_error(message) {
            $(document).ready(function () {
                $.ligerDialog.error(message);
            });
        }
        function f_save() {
            $.ligerDialog.waitting("正在保存中...");
            document.forms[0].submit();
        }

        //审批如果选择"退回",将显示退回原因输入框
        function showReason() {
            if ($("#Status").val() == "4") {
                $("#trReason").attr("style", "");
                $("#trBackTime").attr("style","");
            } else {
                $("#trReason").attr("style", "display:none");
                $("#trBackTime").attr("style", "display:none");
            }
        }

        $(function () {
            $.metadata.setType("attr", "validate");
            var v = $("form").validate({
                debug: true,
                errorPlacement: function (lable, element) {
                    if (element.hasClass("l-textarea")) element.ligerTip({ content: lable.html(), appendIdTo: lable });
                    else if (element.hasClass("l-text-field")) element.parent().ligerTip({ content: lable.html(), appendIdTo: lable });
                    else lable.appendTo(element.parents("td:first").next("td"));
                },
                success: function (lable) {
                    lable.ligerHideTip();
                },
                submitHandler: function () {
                    $("form .l-text,.l-textarea").ligerHideTip();
                    alert("Submitted!")
                }
            });
            $("form").ligerForm();
            $(".l-button-test").click(function () {
                alert(v.element($("#txtName")));
            });
        }); 
    </script>
@using (Html.BeginForm("Approval", "Audit",FormMethod.Post))
{
    @Html.HiddenFor(m => m.OrderId)
    @Html.ValidationSummary(true, "Account creation was unsuccessful. Please correct the errors and try again.")
    <div>
        <table cellpadding="0" border="0" cellspacing="0" class="edittable">
            <tbody>
                <tr>
                    <td align="right" class="editcellmessage">派遣工单主题:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.SupervisionSend.SendTitle, new Dictionary<string, object>() { { "size", 20 }, { "readonly", "readonly" } })
                    </td> 
                </tr> 
                <tr>
                    <td align="right" class="editcellmessage">派遣工单内容:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextAreaFor(m => m.SupervisionSend.SendContent, 3, 25, new Dictionary<string, object>() { { "size", 20 }, { "readonly", "readonly" } })
                    </td> 
                </tr> 
                <tr>
                    <td align="right" class="editcellmessage">接单时限:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.SupervisionSend.LimitOrders, new Dictionary<string, object>() { { "size", 20 }, { "readonly", "readonly" } })
                    </td> 
                </tr> 
                <tr>
                    <td align="right" class="editcellmessage">回单时限:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.SupervisionSend.LimitBack, new Dictionary<string, object>() { { "size", 20 }, { "readonly", "readonly" } })
                    </td> 
                </tr> 
                <tr>
                    <td align="right" class="editcellmessage">审核工单人员姓名:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.AuditStaff, new Dictionary<string, object>() { { "size", 20 }, { "readonly", "readonly" } })
                    </td> 
                </tr> 
                <tr>
                    <td align="right" class="editcellmessage">接单超时次数:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.OrdersOvertimeNum, new Dictionary<string, object>() { { "size", 20 }, { "readonly", "readonly" } })
                    </td> 
                </tr> 
                <tr>
                    <td align="right" class="editcellmessage">回单超时次数:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.BackOvertimeNum, new Dictionary<string, object>() { { "size", 20 }, { "readonly", "readonly" } })
                    </td> 
                </tr> 
                <tr>
                    <td align="right" class="editcellmessage">退回次数:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.ReturnNum, new Dictionary<string, object>() { { "size", 20 }, { "readonly", "readonly" } })
                    </td> 
                </tr> 
                <tr>
                    <td align="right" class="editcellmessage">回单附件:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.BackAttachment, new Dictionary<string, object>() { { "size", 20 }, { "readonly", "readonly" } })
                    </td> 
                </tr> 
                <tr>
                    <td align="right" class="editcellmessage">审批:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.DropDownListFor(m => m.Status, (SelectList)ViewData["selStatus"], new Dictionary<string, object>() { { "onchange", "showReason();" } })
                    </td> 
                </tr>
                <tr id="trReason" style="display:none">
                    <td align="right" class="editcellmessage">退回原因:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextAreaFor(m => m.SupervisionBack.ReturnReason,3,25, new Dictionary<string, object>() { { "size", 20 } })
                    </td> 
                </tr> 
                <tr id="trBackTime" style="display:none">
                    <td align="right" class="editcellmessage">重新回单时限:<span style="color:Red">*</span></td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.SupervisionBack.ReBackTimeLimit, new Dictionary<string, object>() { { "size", 20 }, { "ltype", "date" } })
                    </td> 
                </tr> 
            </tbody>
        </table>
    </div> 
    }