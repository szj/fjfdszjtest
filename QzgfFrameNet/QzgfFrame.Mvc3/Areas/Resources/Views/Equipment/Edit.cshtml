@model QzgfFrame.Resources.EquipmentManger.Models.EquipClie
@{
    
    ViewBag.Title = "Register";
}           
<script src="@Url.Content("~/Content/lib/js/Resources/line.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/lib/js/Resources/Equipment.js")" type="text/javascript"></script>
<script src="@Url.Content("~/lib/json2.js")" type="text/javascript"></script> 
<script src="@Url.Content("~/Lib/jquery/jquery.autoSearchText.js")" type="text/javascript"></script>
<div id="autoSearch"><ul class="menu_v"></ul></div>  
@using (Html.BeginForm("Edit", "Equipment", FormMethod.Post, new { name = "newForm", id = "newForm" }))
{
    @Html.ValidationSummary(true, "Account creation was unsuccessful. Please correct the errors and try again.")
    <div>
        <table cellpadding="0" border="0" cellspacing="0" class="edittable">
            <tbody>
                <tr>
                    <td class="Right_font" width="12%">设备厂家：<span class="l-verify-star">*</span></td>
                    <td class="Left_font" width="30%">
                    <input type="text" id="FactoryName" name="FactoryName"  validate = "{required:true,minlength:1,maxlength:30}"/>
                    @Html.HiddenFor(m => m.FactoryId)
                     @Html.HiddenFor(m => m.equipment.Id)
                      @Html.HiddenFor(m => m.Id)
<input type="hidden" id="frameid" name="frameid" value="@ViewData["frameid"]" />
                    </td> 
                    <td class="Right_font">设备类型：<span class="l-verify-star">*</span></td>
                    <td class="Left_font">
                    <input type="text" id="EquipTypeName" name="EquipTypeName"   validate = "{required:true,minlength:1,maxlength:30}"/>
                    @Html.HiddenFor(m => m.EquipTypeId)
                    </td>
                </tr> 
                 <tr>
                    <td class="Right_font" width="12%">设备型号：<span class="l-verify-star">*</span></td>
                    <td class="Left_font"  colspan="3">
                    @Html.TextBoxFor(m => m.equipment.EquipModelName, new { @class = "dd-text", style = "width:138px;", validate = "{required:true,minlength:1,maxlength:40}" })  
                    </td> 
                   
                </tr>
                <tr>
                 <td class="Right_font" width="12%">设备名称：<span class="l-verify-star">*</span></td>
                    <td class="Left_font" colspan="3">
                    <table style="width:100%"><tr><td>   
                    <input type="hidden" id="terimFlag" value="0"/>    
                    @if (Model.Id == "0")
                    {
                     @Html.TextBoxFor(m => m.equipment.EquipName, new { @class = "dd-text", style = "width:450px;", onblur = "getEquipName(this.value);", validate = "{required:true,minlength:1,maxlength:50}" })  
                    }
                    else
                    {
                        @Model.equipment.EquipName
                     @Html.HiddenFor(m => m.equipment.EquipName)
                    }
                     </td><td id="showTerim" style="width:75%; text-align:left; color:red"></td>
                   </tr></table>
                    </td> 
                </tr>
                 <tr>                   
                    <td class="Right_font" width="12%">设备序列号：</td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.SeqNumber, new { maxlength = "20", @class = "dd-text", style = "width:138px;", validate = "{required:false}" })
                    </td>
                    <td class="Right_font">设备启用时间：<span class="l-verify-star">*</span></td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.StartDatetime, new { @class = "dd-text", style = "width:138px;", validate = "{required:true}", onfocus = "WdatePicker({dateFmt:'yyyy-M-dd'}); " })
                    </td>
                </tr> 
                 
                 <tr>
                    <td class="Right_font" width="12%">设备安装位置：<span class="l-verify-star">*</span></td>
                    <td class="Left_font">
                    @{
               var selFalgT = false; var selFalgF = false;
               if (Model.equipment.Position == 0)
               {
                   selFalgT = true;
                   selFalgF = false;
               }
               else
               {
                   selFalgT = false;
                   selFalgF = true;
               }
                    }     
                    @Html.RadioButton("equipment.Position", "0", selFalgT)用户机房
                    @Html.RadioButton("equipment.Position", "1", selFalgF)局端
                   </td> 
                    <td class="Right_font">基站/机房名称：<span class="l-verify-star">*</span></td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.BaseStationName, new { style = "width:138px;", maxlength = "20", @class = "dd-text", validate = "{required:true}" })
                    </td>
                </tr>
                <tr>
                    <td class="Right_font">所属区县：<span class="l-verify-star">*</span></td>
                     
                     <td class="Left_font">
                     @Html.DropDownList("equipment.DistrictId", (SelectList)ViewData["district"], new { style = "width:135px", ltype = "select" })
                  
                    </td> 
                    <td class="Right_font">所属公司：<span class="l-verify-star">*</span></td>
                     
                    <td class="Left_font">
                    @Html.DropDownList("equipment.CompanyId", (SelectList)ViewData["company"], new { style = "width:135px", ltype = "select" })
                   
                    </td>
                </tr>  
                <tr>
                    <td class="Right_font" width="12%">组网方式：<span class="l-verify-star">*</span></td>
                    <td class="Left_font" colspan="3">
                     @Html.DropDownList("equipment.NetWorkingModeId", (SelectList)ViewData["network"], new { style = "width:135px", ltype = "select" })
                    </td> 
                </tr> 
                <tr ><td class="tit" align="center" colspan="6">设备对应集团客户&nbsp;&nbsp;<span class="l-verify-star" id="displyMsg"></span></td></tr>
                <tr>
                <td colspan="6" class="Left_Bottom">
<table width="100%" border="0" cellpadding="0" cellspacing="0" id="clieFrame" class="com_tab" >
               <tr  class="hno">
                <td   class="bdno"><input type="button" style="width:100px" class="sel_btn" id="addClie" name="Submit" value="关联客户" onclick="f_addh()" /></td>
                 <td > 客户编号 <span class="l-verify-star">*</span></td>
                <td >客户名称 <span class="l-verify-star">*</span></td>
                <td >占用槽位</td>
                <td  >板卡类型</td>
                <td >占用端口</td>
                <td >端口类型</td>
               <td style="width:0"></td>
              </tr>
              @{var i = 0;}
 @foreach (var fc in Model.ClieEquips as IList<QzgfFrame.Resources.ClieEquipManger.Models.ResourceClieEquip>)
 {
     var ClieId = "ClieId" + i; var ClieNo = "ClieNo" + i; var ClieName = "ClieName" + i; var PortTypeId = "PortTypeId" + i;
     var OccupySlot = "OccupySlot" + i; var BoardType = "BoardType" + i; var OccupyPort = "OccupyPort" + i; var SignItem = "SignItem" + i;
     var seqno = i + 1; var OrderNo = "OrderNo" + i; var del_link = "del_link" + i;
          <tr id='@SignItem' class="bno">
              <td  class="bdno"><div align='center' style='width:40px;margin-left:10px;' id="@del_link"><a href='javascript:;' onclick="DeleteClieRow('@SignItem')">删除</a></div></td>
                <td ><input name='@ClieId' type="hidden" id='@ClieId' value='@fc.ClieId' /> <input name='@ClieNo' type='text' class = 'disable-dd-text'  id='@ClieNo' maxlength='15'  size='16' value='@fc.ClieNo' readonly="readonly" /> </td>
                <td  ><input name='@ClieName'  type='text'  id='@ClieName' size='40' value='@fc.ClieName' class = 'disable-dd-text' readonly="readonly" /></td>
                <td ><input name='@OccupySlot'  type='text'  id='@OccupySlot' size='10' value='@fc.OccupySlot' class = 'disable-dd-text' /></td>
                <td ><input name='@BoardType'  type='text'  id='@BoardType' size='10' value='@fc.BoardType' class = 'disable-dd-text' /></td>
                <td ><input name='@OccupyPort'  type='text'  id='@OccupyPort' size='10' value='@fc.OccupyPort' class = 'dd-text'  validate = '{required:true}'/></td>
                 <td class='sno'>@Html.DropDownList(PortTypeId, new SelectList(Model.PortTypes, "Id", "PortTypeName", fc.PortTypeId), new { name = "selPortType" })</td>
               
               <td style="width:0"><input name='@OrderNo' type='hidden' id='@OrderNo' value='@seqno' /></td>
              </tr>                                                                                      i++;
 }
        </table>
        <input name='txtTRLastIndex' type='hidden' id='TRLastIndex' value="@i" />
        <input name='CountIndex' type='hidden' id='CountIndex' value="@i" />
         @Html.HiddenFor(m => m.equipclies)
                </td>
                </tr>
                 <tr>
                    <td class="Right_font" width="12%">登录方式：</td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.LoginStyle, new { maxlength = "20", @class = "dd-text", style = "width:138px;", validate = "{required:false}" })
                    </td> 
                     <td class="Right_font">MAC地址：</td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.MacAddress, new { maxlength = "20", @class = "dd-text", style = "width:138px;", validate = "{required:false,isMAC:true}" })
                    </td> 
                </tr> 
                 <tr>
                    <td class="Right_font" width="12%">SNMP只读共同体：</td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.SnmpOnlyRead, new { maxlength = "20", @class = "dd-text", style = "width:138px;", validate = "{required:false}" })
                    </td> 
                    <td class="Right_font">SNMP只写共同体：</td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.SnmpOnlyWrite, new { maxlength = "20", @class = "dd-text", style = "width:138px;", validate = "{required:false}" })
                    </td>
                </tr> 
                 <tr>
                    <td class="Right_font" width="12%">用户名：</td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.UserName, new { maxlength = "20", @class = "dd-text", style = "width:138px;", validate = "{required:false}" })
                    </td> 
                    <td class="Right_font">密码：</td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.PassWord, new { maxlength = "20", @class = "dd-text", style = "width:138px;", validate = "{required:false}" })
                    </td>
                </tr> 
                 <tr>
                    <td class="Right_font" width="12%">网管IP：</td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.NetManageIp, new { maxlength = "20", @class = "dd-text", style = "width:138px;", validate = "{required:false,isIPB:true}" })
                    </td> 
                    <td class="Right_font">WEB端口：</td>
                    <td class="Left_font">
                    @Html.TextBoxFor(m => m.equipment.WebPort, new { maxlength = "20", @class = "dd-text", style = "width:138px;", validate = "{required:false}" })
                    </td>
                </tr> 
                <tr>
                    <td class="Right_font" width="12%">备注：</td>
                    <td class="Left_font" colspan="3">
                    @Html.TextAreaFor(m => m.equipment.Remark, new { Multiline = true, @class = "l-textarea", size = "80", style = "width:100%", validate = "{required:false,minlength:0,maxlength:100}" })
                    </td> 
                </tr></tbody>
</table>  
<table width="100%"><tr><td style="width:45%"></td>
<td><input type="submit" value="提 交" id="Button1" class="l-button l-button-submit" /> 
<input type="button" value="返 回" class="l-button l-button-test" onclick="javascript:f_windowclose();"/></td></tr></table>                  
   
    </div> 
    }
  
