@model QzgfFrame.System.MenufieldManger.Models.SystemMenufield
@{
    ViewBag.Title = "Register";
}
@using (Html.BeginForm("edit", "Menufield", FormMethod.Post, new { name = "form1", id = "form1" }))
{
    @Html.HiddenFor(m => m.Id)
    @Html.ValidationSummary(true, "Account creation was unsuccessful. Please correct the errors and try again.")
    <div>
        <table cellpadding="0" border="0" cellspacing="0" class="edittable">
            <tbody>
                <tr>
                    <td align="right" class="editcellmessage">
                        字段代码：<span class="l-verify-star">*</span>
                    </td>
                    <td align="left" class="editcell">
                       @Html.TextBoxFor(m => m.Fieldcode, new { validate = "{required:true,minlength:1}", ltype = "text" })
                    </td>
                </tr>
                <tr>
                    <td align="right" class="editcellmessage">
                        字段名称：<span class="l-verify-star">&nbsp;</span>
                    </td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.Fieldname, new { ltype = "text" })
                    </td>
                </tr>
                <tr>
                    <td align="right" class="editcellmessage">
                        表代码：<span class="l-verify-star">*</span>
                    </td>
                    <td align="left" class="editcell">
                        @Html.TextBoxFor(m => m.Tablecode, new { validate = "{required:true,minlength:1}", ltype = "text" })
                    </td>
                </tr>
                <tr>
                    <td align="right" class="editcellmessage">
                        表名称：<span class="l-verify-star">&nbsp;</span>
                    </td>
                    <td align="left" class="editcell">
                       
                        @Html.TextBoxFor(m => m.Tablename, new { ltype = "text" })
                    </td>
                </tr>
                <tr>
                    <td align="right" class="editcellmessage">
                        功能模块：<span class="l-verify-star">*</span>
                    </td>
                    <td align="left" class="editcell">
                       
                        @Html.TextBoxFor(m => m.Menuname, new { validate = "{required:true,minlength:1}", ltype = "text" })
                        @Html.HiddenFor(m => m.Menuid)
                    </td>
                </tr>
                <tr>
                    <td align="right" class="editcellmessage">
                        权限标识：<span class="l-verify-star">&nbsp;</span>
                    </td>
                    <td align="left" class="editcell">
                      
                        @Html.TextBoxFor(m => m.Permissionsflag, new { ltype = "text" })
                    </td>
                </tr>
                <tr>
                    <td align="right" class="editcellmessage">
                        备注：<span class="l-verify-star">&nbsp;</span>
                    </td>
                    <td align="left" class="editcell">
                       
                        @Html.TextAreaFor(m => m.Remark, new { ltype = "text" })
                    </td>
                </tr>
                <tr>
                    <td>
                    </td>
                </tr>
            </tbody>
        </table>
    </div> 
}
<script src="@Url.Content("~/Lib/jquery-validation/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Lib/jquery-validation/messages_cn.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Lib/jquery-validation/jquery.metadata.js")" type="text/javascript"></script>
<script type="text/javascript">
    //var CurID =  <%=CurID %>;
    var Validator = null;
    $(function () {
        //处理下拉框
        $("#Menuname").ligerComboBox({
            selectBoxWidth: 200, treeLeafOnly: false,
            selectBoxHeight: 150, valueFieldID: 'Menuid', textFieldID: 'Menuname',
            tree: { url: '/system/menu/GetMenu', idFieldName: 'id', checkbox: false, topParentIDValue: -1, parentIDFieldName: 'pid' }
        });
        $.metadata.setType("attr", "validate");
        $("#form1").ligerForm();
        deafultValidate($("#form1"));
        Validator = $("#form1").validate();

    });

    function f_success() {
        $(document).ready(function () {
            $.ligerDialog.confirm("是否继续编辑", "保存成功", function (ok) {
                $.ligerDialog.closeWaitting();
                parent.window.frames["mainframe"].f_reload();
                if (!ok) {
                    parent.window.frames["mainframe"].f_closeWindow();
                }
            });
        });
    }
    function f_error(message) {
        $(document).ready(function () {
            $.ligerDialog.error(message);
        });
    }
    function f_save() {
        if (!Validator.form()) return;
        $.ligerDialog.waitting("正在保存中...");
        //提交数据
        document.forms[0].submit();
    } 
</script>
